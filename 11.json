{"paragraphs":[{"title":"参考：https://xgboost.readthedocs.io/en/latest/jvm/xgboost4j_spark_tutorial.html","text":"%spark.dep\r\n// 动态加载第三方的外部包(有可能不起作用)\r\nz.reset()\r\n// z.addRepo(\"Xgboost4j Spark Repo\").url(\"https://mvnrepository.com/artifact/ml.dmlc/xgboost4j-spark\")\r\nz.load(\"ml.dmlc:xgboost4j-spark_2.11:1.0.0\")","user":"anonymous","dateUpdated":"2020-06-21T15:31:00+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660647_1137711827","id":"20200308-171040_1641164313","dateCreated":"2020-06-21T15:31:00+0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:6429"},{"text":"%dep\n// 也可以直接加载本地包（先下载下来）:这个要在创建sparkSession实例前，先执行\nz.reset()\nz.load(\"/home/hduser/software/xgboost4j-spark_2.11-1.0.0.jar\")","user":"anonymous","dateUpdated":"2020-06-21T15:37:19+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660666_-1116018710","id":"20200308-171112_237540249","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:37:20+0800","dateFinished":"2020-06-21T15:37:32+0800","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6430"},{"text":"// 为我们的数据创建一个schema\nimport org.apache.spark.sql.types._\n\nvar schema = StructType(Array(\n        StructField(\"state\", StringType, true), \n        StructField(\"account_length\", DoubleType, true), \n        StructField(\"area_code\", DoubleType, true), \n        StructField(\"phone_number\", StringType, true), \n        StructField(\"intl_plan\", StringType, true), \n        StructField(\"voice_mail_plan\", StringType, true), \n        StructField(\"number_vmail_messages\", DoubleType, true), \n        StructField(\"total_day_minutes\", DoubleType, true), \n        StructField(\"total_day_calls\", DoubleType, true), \n        StructField(\"total_day_charge\", DoubleType, true), \n        StructField(\"total_eve_minutes\", DoubleType, true), \n        StructField(\"total_eve_calls\", DoubleType, true), \n        StructField(\"total_eve_charge\", DoubleType, true), \n        StructField(\"total_night_minutes\", DoubleType, true), \n        StructField(\"total_night_calls\", DoubleType, true), \n        StructField(\"total_night_charge\", DoubleType, true), \n        StructField(\"total_intl_minutes\", DoubleType, true), \n        StructField(\"total_intl_calls\", DoubleType, true), \n        StructField(\"total_intl_charge\", DoubleType, true), \n        StructField(\"number_customer_service_calls\", DoubleType, true), \n        StructField(\"churned\", StringType, true)\n    ))\n","user":"anonymous","dateUpdated":"2020-06-21T15:37:50+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.sql.types._\nschema: org.apache.spark.sql.types.StructType = StructType(StructField(state,StringType,true), StructField(account_length,DoubleType,true), StructField(area_code,DoubleType,true), StructField(phone_number,StringType,true), StructField(intl_plan,StringType,true), StructField(voice_mail_plan,StringType,true), StructField(number_vmail_messages,DoubleType,true), StructField(total_day_minutes,DoubleType,true), StructField(total_day_calls,DoubleType,true), StructField(total_day_charge,DoubleType,true), StructField(total_eve_minutes,DoubleType,true), StructField(total_eve_calls,DoubleType,true), StructField(total_eve_charge,DoubleType,true), StructField(total_night_minutes,DoubleType,true), StructField(total_night_calls,DoubleType,true), StructField(total_ni..."}]},"apps":[],"jobName":"paragraph_1592724660668_-2029352211","id":"20200307-172353_2105657171","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:37:51+0800","dateFinished":"2020-06-21T15:38:05+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6431"},{"text":"// 加载数据集文件(cvs格式)到DataFrame\nval data = \"file:///home/hduser/data/spark/ml/churn.txt\"\nval dataDF = spark.read.option(\"header\",\"true\").schema(schema).csv(data)","user":"anonymous","dateUpdated":"2020-06-21T15:39:32+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"data: String = file:///home/hduser/data/spark/ml/churn.txt\ndataDF: org.apache.spark.sql.DataFrame = [state: string, account_length: double ... 19 more fields]\n"}]},"apps":[],"jobName":"paragraph_1592724660669_1390658885","id":"20200307-171823_1859183516","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:39:32+0800","dateFinished":"2020-06-21T15:39:35+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6432"},{"text":"// 查看schema\ndataDF.printSchema","user":"anonymous","dateUpdated":"2020-06-21T15:39:37+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"root\n |-- state: string (nullable = true)\n |-- account_length: double (nullable = true)\n |-- area_code: double (nullable = true)\n |-- phone_number: string (nullable = true)\n |-- intl_plan: string (nullable = true)\n |-- voice_mail_plan: string (nullable = true)\n |-- number_vmail_messages: double (nullable = true)\n |-- total_day_minutes: double (nullable = true)\n |-- total_day_calls: double (nullable = true)\n |-- total_day_charge: double (nullable = true)\n |-- total_eve_minutes: double (nullable = true)\n |-- total_eve_calls: double (nullable = true)\n |-- total_eve_charge: double (nullable = true)\n |-- total_night_minutes: double (nullable = true)\n |-- total_night_calls: double (nullable = true)\n |-- total_night_charge: double (nullable = true)\n |-- total_intl_minutes: double (nullable = true)\n |-- total_intl_calls: double (nullable = true)\n |-- total_intl_charge: double (nullable = true)\n |-- number_customer_service_calls: double (nullable = true)\n |-- churned: string (nullable = true)\n\n"}]},"apps":[],"jobName":"paragraph_1592724660671_-621818178","id":"20200307-172003_1387018064","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:39:37+0800","dateFinished":"2020-06-21T15:39:37+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6433"},{"text":"// 选择一些列\ndataDF.select(\"state\",\"phone_number\",\"intl_plan\",\"total_day_minutes\",\"churned\").show","user":"anonymous","dateUpdated":"2020-06-21T15:40:01+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"+-----+------------+---------+-----------------+-------+\n|state|phone_number|intl_plan|total_day_minutes|churned|\n+-----+------------+---------+-----------------+-------+\n|   KS|    382-4657|       no|            265.1| False.|\n|   OH|    371-7191|       no|            161.6| False.|\n|   NJ|    358-1921|       no|            243.4| False.|\n|   OH|    375-9999|      yes|            299.4| False.|\n|   OK|    330-6626|      yes|            166.7| False.|\n|   AL|    391-8027|      yes|            223.4| False.|\n|   MA|    355-9993|       no|            218.2| False.|\n|   MO|    329-9001|      yes|            157.0| False.|\n|   LA|    335-4719|       no|            184.5| False.|\n|   WV|    330-8173|      yes|            258.6| False.|\n|   IN|    329-6603|       no|            129.1|  True.|\n|   RI|    344-9403|       no|            187.7| False.|\n|   IA|    363-1107|       no|            128.8| False.|\n|   MT|    394-8006|       no|            156.6| False.|\n|   IA|    366-9238|       no|            120.7| False.|\n|   NY|    351-7269|       no|            332.9|  True.|\n|   ID|    350-8884|       no|            196.4| False.|\n|   VT|    386-2923|       no|            190.7| False.|\n|   VA|    356-2992|       no|            189.7| False.|\n|   TX|    373-2782|       no|            224.4| False.|\n+-----+------------+---------+-----------------+-------+\nonly showing top 20 rows\n\n"}]},"apps":[],"jobName":"paragraph_1592724660672_371157942","id":"20200307-172015_1895224343","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:40:01+0800","dateFinished":"2020-06-21T15:40:06+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6434"},{"text":"import org.apache.spark.ml.feature.StringIndexer\n\n// 将标签列转换为double类型\nval labelIndexer = new StringIndexer().setInputCol(\"churned\").setOutputCol(\"label\")\n\n\n// 将intl_plan列转换为double类型\nval intPlanIndexer = new StringIndexer().setInputCol(\"intl_plan\").setOutputCol(\"int_plan\")","user":"anonymous","dateUpdated":"2020-06-21T15:40:42+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.ml.feature.StringIndexer\nlabelIndexer: org.apache.spark.ml.feature.StringIndexer = strIdx_18026feb86c5\nintPlanIndexer: org.apache.spark.ml.feature.StringIndexer = strIdx_de1d675d96e4\n"}]},"apps":[],"jobName":"paragraph_1592724660673_1204570992","id":"20200307-180609_179533125","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:40:42+0800","dateFinished":"2020-06-21T15:40:42+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6435"},{"text":"// 选择特征\n// 根据领域知识，我们可以认为total_day_minutes和total_day_calls对用户流失有一些影响\n// 然而，phone_number、area_code和state没有任何预测能力\nval features = Array(\"number_customer_service_calls\",\n                     \"total_day_minutes\",\n                     \"total_eve_minutes\",\n                     \"account_length\",\n                     \"number_vmail_messages\",\n                     \"total_day_calls\",\n                     \"total_day_charge\",\n                     \"total_eve_calls\",\n                     \"total_eve_charge\",\n                     \"total_night_calls\",\n                     \"total_intl_calls\",\n                     \"total_intl_charge\",\n                     \"int_plan\")","user":"anonymous","dateUpdated":"2020-06-21T15:41:13+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"features: Array[String] = Array(number_customer_service_calls, total_day_minutes, total_eve_minutes, account_length, number_vmail_messages, total_day_calls, total_day_charge, total_eve_calls, total_eve_charge, total_night_calls, total_intl_calls, total_intl_charge, int_plan)\n"}]},"apps":[],"jobName":"paragraph_1592724660674_-237653111","id":"20200307-180948_268787298","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:41:13+0800","dateFinished":"2020-06-21T15:41:14+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6436"},{"text":"// 将选定的特征列合并到单个的特征向量列\nimport org.apache.spark.ml.feature.VectorAssembler\n\nval assembler = new VectorAssembler().setInputCols(features).setOutputCol(\"features\")","user":"anonymous","dateUpdated":"2020-06-21T15:41:15+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.ml.feature.VectorAssembler\nassembler: org.apache.spark.ml.feature.VectorAssembler = vecAssembler_0df8531a79ce\n"}]},"apps":[],"jobName":"paragraph_1592724660674_22962666","id":"20200307-181922_695074504","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:41:15+0800","dateFinished":"2020-06-21T15:41:16+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6437"},{"text":"// 增加标签列\n// val dataDF2 = labelIndexer.fit(dataDF).transform(dataDF)\n// dataDF2.printSchema","user":"anonymous","dateUpdated":"2020-06-21T15:31:00+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660675_473758036","id":"20200307-182039_1556368897","dateCreated":"2020-06-21T15:31:00+0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6438"},{"text":"// \"True\"被转换为1，\"False\"被转换为0\n// dataDF2.select(\"churned\",\"label\").show","user":"anonymous","dateUpdated":"2020-06-21T15:31:00+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660677_-482536536","id":"20200307-182201_1067164948","dateCreated":"2020-06-21T15:31:00+0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6439"},{"text":"// 增加int_plan列\n// val dataDF3 = intPlanIndexer.fit(dataDF2).transform(dataDF2)\n// dataDF3.printSchema","user":"anonymous","dateUpdated":"2020-06-21T15:31:00+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660678_540600856","id":"20200307-182235_1800735189","dateCreated":"2020-06-21T15:31:00+0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6440"},{"text":"// \"no\"被转换为0, \"yes\"被转换为1\n// dataDF3.select(\"intl_plan\",\"int_plan\").show","user":"anonymous","dateUpdated":"2020-06-21T15:31:00+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660679_-1407097090","id":"20200307-182351_1717046985","dateCreated":"2020-06-21T15:31:00+0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6441"},{"text":"// 增加特征向量列\n// val dataDF4 = assembler.transform(dataDF3)\n// dataDF4.printSchema","user":"anonymous","dateUpdated":"2020-06-21T15:31:00+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660680_-1974483230","id":"20200307-182434_1468037733","dateCreated":"2020-06-21T15:31:00+0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6442"},{"text":"// dataDF4.select(\"features\").show(false)","user":"anonymous","dateUpdated":"2020-06-21T15:31:00+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660683_458959822","id":"20200307-182542_797800636","dateCreated":"2020-06-21T15:31:00+0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6443"},{"text":"// 分割数据集\nval seed = 1234\n// val Array(trainData, testData) = dataDF4.randomSplit(Array(0.8,0.2), seed)\nval Array(trainData, testData) = dataDF.randomSplit(Array(0.8,0.2), seed)\n\nprintln(trainData.count)\nprintln(testData.count)","user":"anonymous","dateUpdated":"2020-06-21T15:41:46+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"2691\n642\nseed: Int = 1234\ntrainData: org.apache.spark.sql.Dataset[org.apache.spark.sql.Row] = [state: string, account_length: double ... 19 more fields]\ntestData: org.apache.spark.sql.Dataset[org.apache.spark.sql.Row] = [state: string, account_length: double ... 19 more fields]\n"}]},"apps":[],"jobName":"paragraph_1592724660686_-1956340906","id":"20200307-182604_574095943","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:41:46+0800","dateFinished":"2020-06-21T15:41:58+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6444"},{"text":"// 创建一个XGBoost分类器\nimport ml.dmlc.xgboost4j.scala.spark.{XGBoostClassifier, XGBoostClassificationModel}\n\nval xgb = new XGBoostClassifier().setFeaturesCol(\"features\").setLabelCol(\"label\")\n// XGBoostClassifier的objective参数默认是binary:logistic，这正是我们这个项目的学习任务和目标\n// 根据自己的任务，记得设置正确的学习任务和目标\n\n/*\nimport ml.dmlc.xgboost4j.scala.spark.XGBoostClassifier\n\nval xgbParam = Map(\"eta\" -> 0.1f,\n      \"missing\" -> -999,\n      \"max_depth\" -> 2,\n      \"objective\" -> \"multi:softprob\",\n      \"num_class\" -> 3,\n      \"num_round\" -> 100,\n      \"num_workers\" -> 2)\n      \nval xgbClassifier = new XGBoostClassifier(xgbParam).\n      setFeaturesCol(\"features\").\n      setLabelCol(\"classIndex\")\n      \n*/","user":"anonymous","dateUpdated":"2020-06-21T15:42:46+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import ml.dmlc.xgboost4j.scala.spark.{XGBoostClassifier, XGBoostClassificationModel}\nxgb: ml.dmlc.xgboost4j.scala.spark.XGBoostClassifier = xgbc_c322558e0bc1\n"}]},"apps":[],"jobName":"paragraph_1592724660689_966250069","id":"20200307-182715_790187377","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:42:46+0800","dateFinished":"2020-06-21T15:42:49+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6445"},{"text":"// 创建管道\nimport org.apache.spark.ml.{Pipeline,PipelineStage}\n\nval pipeline = new Pipeline().setStages(Array(labelIndexer, intPlanIndexer, assembler, xgb))","user":"anonymous","dateUpdated":"2020-06-21T15:43:29+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.ml.{Pipeline, PipelineStage}\npipeline: org.apache.spark.ml.Pipeline = pipeline_3b0ed31c9764\n"}]},"apps":[],"jobName":"paragraph_1592724660691_478575752","id":"20200307-204603_697299316","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:43:29+0800","dateFinished":"2020-06-21T15:43:30+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6446"},{"text":"// 创建评估器\nimport org.apache.spark.ml.evaluation.MulticlassClassificationEvaluator\n\nval evaluator = new MulticlassClassificationEvaluator().setLabelCol(\"label\")","user":"anonymous","dateUpdated":"2020-06-21T15:43:44+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.ml.evaluation.MulticlassClassificationEvaluator\nevaluator: org.apache.spark.ml.evaluation.MulticlassClassificationEvaluator = mcEval_49b902207e6e\n"}]},"apps":[],"jobName":"paragraph_1592724660692_-1337384132","id":"20200307-204252_2015488067","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:43:44+0800","dateFinished":"2020-06-21T15:43:44+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6447"},{"text":"// 创建评估器。为什么不是二分类评估器？\n// import org.apache.spark.ml.evaluation.BinaryClassificationEvaluator\n\n// val evaluator = new BinaryClassificationEvaluator().setLabelCol(\"label\")","user":"anonymous","dateUpdated":"2020-06-21T15:43:52+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660693_-1467003978","id":"20200616-163129_288347931","dateCreated":"2020-06-21T15:31:00+0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6448"},{"text":"// 创建参数网格\nimport org.apache.spark.ml.tuning.ParamGridBuilder\n\nval  paramGrid = new ParamGridBuilder().addGrid(xgb.maxDepth, Array(3,8))\n                                       .addGrid(xgb.eta, Array(0.2, 0.6))\n                                       .build()","user":"anonymous","dateUpdated":"2020-06-21T15:44:16+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.ml.tuning.ParamGridBuilder\nparamGrid: Array[org.apache.spark.ml.param.ParamMap] =\nArray({\n\txgbc_c322558e0bc1-eta: 0.2,\n\txgbc_c322558e0bc1-maxDepth: 3\n}, {\n\txgbc_c322558e0bc1-eta: 0.6,\n\txgbc_c322558e0bc1-maxDepth: 3\n}, {\n\txgbc_c322558e0bc1-eta: 0.2,\n\txgbc_c322558e0bc1-maxDepth: 8\n}, {\n\txgbc_c322558e0bc1-eta: 0.6,\n\txgbc_c322558e0bc1-maxDepth: 8\n})\n"}]},"apps":[],"jobName":"paragraph_1592724660693_1976799934","id":"20200307-204354_615571472","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:44:16+0800","dateFinished":"2020-06-21T15:44:17+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6449"},{"text":"// 创建一个交叉验证器\nimport org.apache.spark.ml.tuning.CrossValidator\n\nval cv = new CrossValidator().setEstimator(pipeline)\n                             .setEvaluator(evaluator)\n                             .setEstimatorParamMaps(paramGrid)\n                             .setNumFolds(3)","user":"anonymous","dateUpdated":"2020-06-21T15:44:36+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.ml.tuning.CrossValidator\ncv: org.apache.spark.ml.tuning.CrossValidator = cv_a1e488dc7da9\n"}]},"apps":[],"jobName":"paragraph_1592724660694_147862553","id":"20200307-204714_101346283","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:44:36+0800","dateFinished":"2020-06-21T15:44:36+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6450"},{"text":"// 现在，可以使用训练集来拟合模型，并选择最佳的参数组合\nval model = cv.fit(trainData)","user":"anonymous","dateUpdated":"2020-06-21T15:44:43+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Tracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nTracker started, with env={DMLC_NUM_SERVER=0, DMLC_TRACKER_URI=192.168.190.128, DMLC_TRACKER_PORT=9091, DMLC_NUM_WORKER=1}\nmodel: org.apache.spark.ml.tuning.CrossValidatorModel = cv_a1e488dc7da9\n"}]},"apps":[],"jobName":"paragraph_1592724660694_-175473832","id":"20200307-204833_1837130962","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:44:43+0800","dateFinished":"2020-06-21T15:45:26+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6451"},{"text":"// 使用训练出来的模型对测试集进行预测\nval predictions = model.transform(testData)\npredictions.printSchema","user":"anonymous","dateUpdated":"2020-06-21T15:45:35+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"root\n |-- state: string (nullable = true)\n |-- account_length: double (nullable = true)\n |-- area_code: double (nullable = true)\n |-- phone_number: string (nullable = true)\n |-- intl_plan: string (nullable = true)\n |-- voice_mail_plan: string (nullable = true)\n |-- number_vmail_messages: double (nullable = true)\n |-- total_day_minutes: double (nullable = true)\n |-- total_day_calls: double (nullable = true)\n |-- total_day_charge: double (nullable = true)\n |-- total_eve_minutes: double (nullable = true)\n |-- total_eve_calls: double (nullable = true)\n |-- total_eve_charge: double (nullable = true)\n |-- total_night_minutes: double (nullable = true)\n |-- total_night_calls: double (nullable = true)\n |-- total_night_charge: double (nullable = true)\n |-- total_intl_minutes: double (nullable = true)\n |-- total_intl_calls: double (nullable = true)\n |-- total_intl_charge: double (nullable = true)\n |-- number_customer_service_calls: double (nullable = true)\n |-- churned: string (nullable = true)\n |-- label: double (nullable = false)\n |-- int_plan: double (nullable = false)\n |-- features: vector (nullable = true)\n |-- rawPrediction: vector (nullable = true)\n |-- probability: vector (nullable = true)\n |-- prediction: double (nullable = false)\n\npredictions: org.apache.spark.sql.DataFrame = [state: string, account_length: double ... 25 more fields]\n"}]},"apps":[],"jobName":"paragraph_1592724660695_330308090","id":"20200307-204919_232016443","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:45:35+0800","dateFinished":"2020-06-21T15:45:36+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6452"},{"text":"predictions.select(\"state\",\"account_length\",\"area_code\",\"phone_number\",\"label\",\"prediction\").show()","user":"anonymous","dateUpdated":"2020-06-21T15:45:58+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{"0":{"graph":{"mode":"table","height":504,"optionOpen":false}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"+-----+--------------+---------+------------+-----+----------+\n|state|account_length|area_code|phone_number|label|prediction|\n+-----+--------------+---------+------------+-----+----------+\n|   AK|           1.0|    408.0|    373-1028|  0.0|       0.0|\n|   AK|          36.0|    408.0|    341-9764|  0.0|       0.0|\n|   AK|          41.0|    415.0|    378-7733|  0.0|       0.0|\n|   AK|          61.0|    415.0|    346-8863|  0.0|       0.0|\n|   AK|         103.0|    510.0|    359-9454|  0.0|       0.0|\n|   AK|         104.0|    408.0|    366-4467|  0.0|       0.0|\n|   AK|         111.0|    415.0|    364-7719|  1.0|       1.0|\n|   AK|         117.0|    415.0|    337-8078|  0.0|       0.0|\n|   AK|         130.0|    415.0|    392-5587|  0.0|       0.0|\n|   AK|         136.0|    415.0|    402-1381|  0.0|       0.0|\n|   AK|         138.0|    415.0|    340-3409|  0.0|       0.0|\n|   AL|          55.0|    415.0|    375-2975|  1.0|       1.0|\n|   AL|          85.0|    408.0|    411-4232|  0.0|       0.0|\n|   AL|          89.0|    510.0|    347-2016|  1.0|       1.0|\n|   AL|          91.0|    510.0|    378-5633|  0.0|       0.0|\n|   AL|          92.0|    408.0|    371-7366|  0.0|       0.0|\n|   AL|         100.0|    415.0|    377-5258|  0.0|       0.0|\n|   AL|         102.0|    408.0|    364-7622|  0.0|       0.0|\n|   AL|         109.0|    408.0|    361-2924|  0.0|       0.0|\n|   AL|         172.0|    408.0|    359-5731|  1.0|       1.0|\n+-----+--------------+---------+------------+-----+----------+\nonly showing top 20 rows\n\n"}]},"apps":[],"jobName":"paragraph_1592724660696_-965141354","id":"20200307-210634_1538268376","dateCreated":"2020-06-21T15:31:00+0800","dateStarted":"2020-06-21T15:45:58+0800","dateFinished":"2020-06-21T15:45:59+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6453"},{"text":"// 评估模型\nval auc = evaluator.evaluate(predictions)","user":"anonymous","dateUpdated":"2020-06-21T15:46:08+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660699_-1199922250","id":"20200307-204951_1309947857","dateCreated":"2020-06-21T15:31:00+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6454","dateFinished":"2020-06-21T15:46:09+0800","dateStarted":"2020-06-21T15:46:08+0800","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"auc: Double = 0.9310427120159991\n"}]}},{"text":"// 相比随机森林分类器，SGBoost4J-Spark有一个较高的AUC得分,并且训练相同的数据集速度更快。\n// 测试数据集有642个观察点，其中预测会流失的人数有 75 个\nprintln(predictions.count)\nprintln(predictions.filter(\"prediction=1\").count)","user":"anonymous","dateUpdated":"2020-06-21T15:46:13+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660700_2030357261","id":"20200307-205052_924188308","dateCreated":"2020-06-21T15:31:00+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6455","dateFinished":"2020-06-21T15:46:14+0800","dateStarted":"2020-06-21T15:46:13+0800","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"642\n75\n"}]}},{"text":"// 预测不会流失的客户中，实际上是有535人没有流失\nval trueNegative = predictions.select(\"*\").where(\"prediction=0 and label=0\").count\nprintln(s\"TN: ${trueNegative}\")","user":"anonymous","dateUpdated":"2020-06-21T15:46:39+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660702_-714465760","id":"20200307-205304_110285851","dateCreated":"2020-06-21T15:31:00+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6456","dateFinished":"2020-06-21T15:46:40+0800","dateStarted":"2020-06-21T15:46:39+0800","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"TN: 535\ntrueNegative: Long = 535\n"}]}},{"text":"// 预测会流失的客户中，实际上是有65人流失了\nval truePositive = predictions.select(\"*\").where(\"prediction=1 and label=1\").count\nprintln(s\"TP: ${truePositive}\")","user":"anonymous","dateUpdated":"2020-06-21T15:46:49+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660703_-2022723143","id":"20200307-205419_1633206043","dateCreated":"2020-06-21T15:31:00+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6457","dateFinished":"2020-06-21T15:46:49+0800","dateStarted":"2020-06-21T15:46:49+0800","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"TP: 65\ntruePositive: Long = 65\n"}]}},{"text":"// 预测不会流失的客户中，实际上有32个客户流失了\nval falseNegative = predictions.select(\"*\").where(\"prediction=0 and label=1\").count\nprintln(s\"FN: ${falseNegative}\")","user":"anonymous","dateUpdated":"2020-06-21T15:46:53+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660704_987157254","id":"20200307-205510_1575028040","dateCreated":"2020-06-21T15:31:00+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6458","dateFinished":"2020-06-21T15:46:53+0800","dateStarted":"2020-06-21T15:46:53+0800","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"FN: 32\nfalseNegative: Long = 32\n"}]}},{"text":"// 预测会流失的客户中，实际上有10个客户没有流失\nval falsePositive = predictions.select(\"*\").where(\"prediction=1 and label=0\").count\nprintln(s\"FP: ${falsePositive}\")","user":"anonymous","dateUpdated":"2020-06-21T15:46:58+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660705_1364281732","id":"20200307-205548_902375951","dateCreated":"2020-06-21T15:31:00+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6459","dateFinished":"2020-06-21T15:46:59+0800","dateStarted":"2020-06-21T15:46:58+0800","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"FP: 10\nfalsePositive: Long = 10\n"}]}},{"text":"// 可以根据RawPrediction或Probability对输出进行排序，以找出概率最高的目标客户。\n// RawPrediction和Probability为每个预测提供了一个可靠的度量。值越大，模型对其预测的信心就越大。\npredictions.select(\"phone_number\", \"RawPrediction\", \"prediction\")\n           .orderBy($\"RawPrediction\".asc)\n           .show(false)","user":"anonymous","dateUpdated":"2020-06-21T15:47:04+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660706_-1467846353","id":"20200307-205632_95675566","dateCreated":"2020-06-21T15:31:00+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6460","dateFinished":"2020-06-21T15:47:05+0800","dateStarted":"2020-06-21T15:47:04+0800","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"+------------+----------------------------------------+----------+\n|phone_number|RawPrediction                           |prediction|\n+------------+----------------------------------------+----------+\n|399-7865    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|370-5527    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|359-4336    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|385-4766    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|336-3819    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|359-5731    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|373-7974    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|399-2457    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|373-2053    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|387-5453    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|330-4978    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|352-5466    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|355-6837    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|393-4823    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|394-7447    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|419-1714    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|406-2866    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|389-4608    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|401-7359    |[-0.5983606576919556,0.5983606576919556]|1.0       |\n|415-8448    |[-0.5979166626930237,0.5979166626930237]|1.0       |\n+------------+----------------------------------------+----------+\nonly showing top 20 rows\n\n"}]}},{"title":"特征重要度","text":"// 与随机森林相似，XGBoost可以提取特征重要度\nimport ml.dmlc.xgboost4j.scala.spark.XGBoostClassificationModel\nimport org.apache.spark.ml.PipelineModel\n\n// 最优的管道模型\nval bestModel = model.bestModel\n\n// 拿到最优的XGBoost Model\nval xgbModel = bestModel.asInstanceOf[PipelineModel].stages.last.asInstanceOf[XGBoostClassificationModel]\n\n// 执行getFeatureScore方法来提取特征重要度\n// 该方法返回一个map，其中key是特征数组索引，value是相应的特征重要度得分\nxgbModel.nativeBooster.getFeatureScore()\n","user":"anonymous","dateUpdated":"2020-06-21T15:51:03+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660709_364510292","id":"20200307-211307_1126571213","dateCreated":"2020-06-21T15:31:00+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6461","dateFinished":"2020-06-21T15:51:04+0800","dateStarted":"2020-06-21T15:51:03+0800","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import ml.dmlc.xgboost4j.scala.spark.XGBoostClassificationModel\nimport org.apache.spark.ml.PipelineModel\nbestModel: org.apache.spark.ml.Model[_] = pipeline_3b0ed31c9764\nxgbModel: ml.dmlc.xgboost4j.scala.spark.XGBoostClassificationModel = xgbc_c322558e0bc1\nres13: scala.collection.mutable.Map[String,Integer] = Map(f7 -> 4, f9 -> 6, f10 -> 4, f12 -> 3, f11 -> 4, f0 -> 5, f1 -> 11, f2 -> 14, f3 -> 2, f4 -> 6, f5 -> 5)\n"}]}},{"text":"// 检查XGBoost4J-Spark最佳模型所使用的参数\nprintln(xgbModel.extractParamMap)","user":"anonymous","dateUpdated":"2020-06-21T15:51:32+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":12,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660712_-1188579080","id":"20200308-121922_1384750831","dateCreated":"2020-06-21T15:31:00+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6462","dateFinished":"2020-06-21T15:51:33+0800","dateStarted":"2020-06-21T15:51:32+0800","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"{\n\txgbc_c322558e0bc1-allowNonZeroForMissing: false,\n\txgbc_c322558e0bc1-alpha: 0.0,\n\txgbc_c322558e0bc1-baseScore: 0.5,\n\txgbc_c322558e0bc1-batchSize: 32768,\n\txgbc_c322558e0bc1-cacheTrainingSet: false,\n\txgbc_c322558e0bc1-checkpointInterval: -1,\n\txgbc_c322558e0bc1-checkpointPath: ,\n\txgbc_c322558e0bc1-colsampleBylevel: 1.0,\n\txgbc_c322558e0bc1-colsampleBytree: 1.0,\n\txgbc_c322558e0bc1-customEval: null,\n\txgbc_c322558e0bc1-customObj: null,\n\txgbc_c322558e0bc1-dmlcWorkerConnectRetry: 5,\n\txgbc_c322558e0bc1-eta: 0.2,\n\txgbc_c322558e0bc1-evalMetric: error,\n\txgbc_c322558e0bc1-featuresCol: features,\n\txgbc_c322558e0bc1-gamma: 0.0,\n\txgbc_c322558e0bc1-growPolicy: depthwise,\n\txgbc_c322558e0bc1-labelCol: label,\n\txgbc_c322558e0bc1-lambda: 1.0,\n\txgbc_c322558e0bc1-lambdaBias: 0.0,\n\txgbc_c322558e0bc1-maxBin: 16,\n\txgbc_c322558e0bc1-maxDeltaStep: 0.0,\n\txgbc_c322558e0bc1-maxDepth: 8,\n\txgbc_c322558e0bc1-minChildWeight: 1.0,\n\txgbc_c322558e0bc1-missing: NaN,\n\txgbc_c322558e0bc1-normalizeType: tree,\n\txgbc_c322558e0bc1-nthread: 1,\n\txgbc_c322558e0bc1-numEarlyStoppingRounds: 0,\n\txgbc_c322558e0bc1-numRound: 1,\n\txgbc_c322558e0bc1-numWorkers: 1,\n\txgbc_c322558e0bc1-objective: reg:squarederror,\n\txgbc_c322558e0bc1-predictionCol: prediction,\n\txgbc_c322558e0bc1-probabilityCol: probability,\n\txgbc_c322558e0bc1-rabitRingReduceThreshold: 32768,\n\txgbc_c322558e0bc1-rabitTimeout: -1,\n\txgbc_c322558e0bc1-rateDrop: 0.0,\n\txgbc_c322558e0bc1-rawPredictionCol: rawPrediction,\n\txgbc_c322558e0bc1-sampleType: uniform,\n\txgbc_c322558e0bc1-scalePosWeight: 1.0,\n\txgbc_c322558e0bc1-seed: 0,\n\txgbc_c322558e0bc1-silent: 0,\n\txgbc_c322558e0bc1-sketchEps: 0.03,\n\txgbc_c322558e0bc1-skipDrop: 0.0,\n\txgbc_c322558e0bc1-subsample: 1.0,\n\txgbc_c322558e0bc1-timeoutRequestWorkers: 1800000,\n\txgbc_c322558e0bc1-trackerConf: TrackerConf(0,python),\n\txgbc_c322558e0bc1-trainTestRatio: 1.0,\n\txgbc_c322558e0bc1-treeLimit: 0,\n\txgbc_c322558e0bc1-treeMethod: auto,\n\txgbc_c322558e0bc1-useExternalMemory: false,\n\txgbc_c322558e0bc1-verbosity: 1\n}\n"}]}},{"user":"anonymous","dateUpdated":"2020-06-21T15:31:00+0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1592724660713_9494651","id":"20200308-212713_2079008842","dateCreated":"2020-06-21T15:31:00+0800","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6463"}],"name":"spark_机器学习库/XGBoost算法/电信客户流失预测","id":"2FD592G7Z","noteParams":{},"noteForms":{},"angularObjects":{"spark:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}
